{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "nixpacks",
    "config": {
      "nixpacks": {
        "buildCommands": [
          "cp .env.production .env || true",
          "composer install --no-scripts --ignore-platform-reqs",
          "npm ci",
          "npm run build"
        ]
      }
    }
  },
  "deploy": {
    "startCommand": "php artisan migrate --force && php artisan db:seed --class=CreateAdminUser && php artisan serve --host=0.0.0.0 --port=$PORT"
  }
}
